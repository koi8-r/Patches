TODO: clearerr() before fgetc(), or best answer==EOF.
